
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0a0a0f">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Everest">
<meta name="description" content="M√©todo Everest ‚Äî Rotina de Alta Performance">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<title>M√©todo Everest</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;1,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #0a0a0f;
  --bg2: #12121a;
  --bg3: #1a1a26;
  --surface: #1e1e2e;
  --border: rgba(255,255,255,0.07);
  --gold: #d4a853;
  --gold-dim: rgba(212,168,83,0.15);
  --gold-glow: rgba(212,168,83,0.3);
  --ice: #7eb8d4;
  --green: #4caf7d;
  --red: #e05252;
  --text: #eeeef0;
  --text-2: #9999aa;
  --text-3: #55556a;
  --font-display: 'Bebas Neue', sans-serif;
  --font-body: 'DM Sans', sans-serif;
  --font-mono: 'DM Mono', monospace;
  --radius: 12px;
  --nav-h: 68px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
html, body { height: 100%; overflow: hidden; background: var(--bg); }
body { font-family: var(--font-body); color: var(--text); overscroll-behavior: none; }

body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}

/* ‚îÄ‚îÄ SCREENS ‚îÄ‚îÄ */
.screen { display: none; position: fixed; inset: 0; overflow-y: auto; overscroll-behavior: contain; }
.screen.active { display: block; }
#screen-login.active { display: flex; }

/* ‚îÄ‚îÄ LOGIN ‚îÄ‚îÄ */
#screen-login {
  display: none; flex-direction: column; align-items: center; justify-content: space-between;
  position: fixed; inset: 0; z-index: 500; overflow: hidden; background: #141e2a;
}
#screen-login.active { display: flex; }
.login-bg { position: absolute; inset: -10%; background: linear-gradient(160deg, #0d1520, #0a0a0f); }
.login-top { position: relative; z-index:1; width:100%; padding:60px 32px 0; text-align:center; }
.login-logo { width:72px; height:72px; margin:0 auto 24px; }
.login-logo svg { width:100%; height:100%; }
.login-tagline { font-family:var(--font-display); font-size:13px; letter-spacing:4px; color:var(--ice); opacity:.6; margin-bottom:48px; }
.login-title { font-family:var(--font-display); font-size:clamp(52px,14vw,80px); line-height:.9; letter-spacing:3px; color:var(--text); margin-bottom:12px; }
.login-title em { color:var(--gold); font-style:normal; }
.login-sub { font-size:14px; color:var(--text-2); line-height:1.5; max-width:260px; margin:0 auto; }
.login-bottom { position:relative; z-index:1; width:100%; padding:0 32px 60px; }
.btn-login { width:100%; padding:18px; background:linear-gradient(135deg,rgba(126,184,212,.2),rgba(126,184,212,.05)); border:1px solid rgba(126,184,212,.4); border-radius:4px; color:var(--ice); font-family:var(--font-display); font-size:18px; letter-spacing:3px; cursor:pointer; backdrop-filter:blur(10px); box-shadow:0 0 30px rgba(126,184,212,.15); transition:all .3s; }
.btn-login:hover { box-shadow:0 0 50px rgba(126,184,212,.3); }
.login-hint { text-align:center; font-size:12px; color:var(--text-3); margin-top:16px; }

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
#nav {
  position: fixed; bottom: 0; left: 0; right: 0; height: var(--nav-h);
  background: rgba(10,10,15,.9); backdrop-filter: blur(20px);
  border-top: 1px solid var(--border); display: flex;
  z-index: 100; padding-bottom: env(safe-area-inset-bottom);
}
.nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; cursor: pointer; transition: all .2s; padding-top: 4px; }
.nav-icon { font-size: 20px; opacity: .4; transition: all .2s; }
.nav-label { font-size: 10px; font-family: var(--font-mono); letter-spacing: 1px; color: var(--text-3); transition: all .2s; text-transform: uppercase; }
.nav-item.active .nav-icon { opacity: 1; }
.nav-item.active .nav-label { color: var(--ice); }

/* ‚îÄ‚îÄ SCREENS PADDING ‚îÄ‚îÄ */
.screen { padding-bottom: calc(var(--nav-h) + 16px); }

/* ‚îÄ‚îÄ INICIO ‚îÄ‚îÄ */
#screen-inicio .screen-header { padding: 24px 20px 0; }
#screen-inicio .greeting { font-family: var(--font-mono); font-size: 11px; letter-spacing: 3px; color: var(--text-3); text-transform: uppercase; margin-bottom: 6px; }
#screen-inicio .headline { font-family: var(--font-display); font-size: clamp(36px,9vw,52px); line-height: .95; color: var(--text); letter-spacing: 2px; }
#screen-inicio .headline em { color: var(--gold); font-style: normal; }

.streak-card { margin: 20px 20px 0; background: linear-gradient(135deg,rgba(212,168,83,.12),rgba(212,168,83,.04)); border: 1px solid rgba(212,168,83,.25); border-radius: var(--radius); padding: 20px; display: flex; align-items: center; gap: 16px; }
.streak-fire { font-size: 40px; }
.streak-info { flex: 1; }
.streak-label { font-size: 11px; font-family: var(--font-mono); letter-spacing: 2px; color: var(--text-3); text-transform: uppercase; margin-bottom: 4px; }
.streak-num { font-family: var(--font-display); font-size: 48px; line-height: 1; color: var(--gold); }
.streak-unit { font-family: var(--font-display); font-size: 16px; color: var(--text-2); margin-top: 2px; }

.section-title { font-family: var(--font-display); font-size: 13px; letter-spacing: 3px; color: var(--text-3); text-transform: uppercase; padding: 24px 20px 12px; }
.quick-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 0 20px; }
.quick-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; cursor: pointer; transition: border-color .2s; }
.quick-card:hover { border-color: rgba(126,184,212,.3); }
.quick-card-icon { font-size: 24px; margin-bottom: 10px; }
.quick-card-title { font-size: 13px; font-weight: 500; color: var(--text); margin-bottom: 4px; }
.quick-card-sub { font-size: 11px; color: var(--text-3); }

/* ‚îÄ‚îÄ HOJE (66 DIAS) ‚îÄ‚îÄ */
#screen-hoje { padding-bottom: 0; overflow: hidden; }

/* Onboarding Steps Container */
.s66-flow { position: fixed; inset: 0; bottom: var(--nav-h); overflow-y: auto; overscroll-behavior: contain; }

/* STEP 0 - Bot√£o Inicial */
.s66-onboard {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  min-height: 100%; padding: 40px 24px; text-align: center;
  background: linear-gradient(180deg, #0a0a0f 0%, #0d1520 60%, #0a0a0f 100%);
  position: relative; overflow: hidden;
}
.s66-onboard::before {
  content: ''; position: absolute; inset: 0;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 600'%3E%3Cdefs%3E%3CradialGradient id='g' cx='50%25' cy='60%25'%3E%3Cstop offset='0%25' stop-color='%237eb8d4' stop-opacity='0.07'/%3E%3Cstop offset='100%25' stop-color='transparent'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect fill='url(%23g)' width='100%25' height='100%25'/%3E%3C/svg%3E") center/cover;
  pointer-events: none;
}
.s66-mountain-bg {
  position: absolute; bottom: 0; left: 0; right: 0; height: 45%;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 200'%3E%3Cpolygon points='200,20 0,200 400,200' fill='%230d1520' opacity='0.8'/%3E%3Cpolygon points='200,20 80,200 320,200' fill='%230a0f1a' opacity='0.6'/%3E%3Cpolygon points='320,60 200,200 400,200' fill='%230d1520' opacity='0.5'/%3E%3Cpolygon points='100,80 0,200 200,200' fill='%230a0f1a' opacity='0.5'/%3E%3C/svg%3E") bottom/cover no-repeat;
  pointer-events: none; opacity: 0.6;
}
.s66-onboard-content { position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; }
.s66-peak-icon { font-size: 72px; margin-bottom: 20px; filter: drop-shadow(0 0 24px rgba(126,184,212,0.35)); }
.s66-onboard h1 { font-family: var(--font-display); font-size: clamp(56px,14vw,80px); line-height: 0.9; color: var(--text); letter-spacing: 3px; margin-bottom: 16px; }
.s66-onboard h1 span { color: var(--ice); display: block; }
.s66-onboard p { color: var(--text-2); font-size: 14px; line-height: 1.65; max-width: 260px; margin-bottom: 48px; font-style: italic; }
.btn-subir {
  background: linear-gradient(135deg, rgba(126,184,212,0.2), rgba(126,184,212,0.05));
  border: 1px solid rgba(126,184,212,0.45); border-radius: 4px;
  color: var(--ice); font-family: var(--font-display); font-size: 18px;
  letter-spacing: 3px; padding: 18px 48px; cursor: pointer;
  transition: all .3s; backdrop-filter: blur(10px);
  width: 100%; max-width: 320px;
  box-shadow: 0 0 40px rgba(126,184,212,0.15), inset 0 1px 0 rgba(255,255,255,0.05);
}
.btn-subir:active { transform: scale(0.98); }

/* STEP 1 - Apresenta√ß√£o */
.s66-apresentacao {
  display: none; flex-direction: column; justify-content: center;
  min-height: 100%; padding: 60px 28px 40px;
  background: linear-gradient(160deg, #0a0a0f 0%, #0d1520 50%, #0a0a0f 100%);
  position: relative; overflow: hidden;
}
.s66-apresentacao.visible { display: flex; }
.s66-apresentacao::before {
  content: ''; position: absolute; top: -20%; left: 50%; transform: translateX(-50%);
  width: 400px; height: 400px;
  background: radial-gradient(circle, rgba(126,184,212,0.1) 0%, transparent 70%);
  pointer-events: none;
}
.apres-tag { font-family: var(--font-mono); font-size: 11px; letter-spacing: 3px; color: var(--ice); opacity: 0.6; text-transform: uppercase; margin-bottom: 24px; position: relative; }
.s66-apresentacao h2 { font-family: var(--font-display); font-size: clamp(52px,13vw,72px); line-height: 0.88; color: var(--text); letter-spacing: 3px; margin-bottom: 28px; position: relative; }
.s66-apresentacao h2 em { color: var(--ice); font-style: normal; display: block; }
.apres-divider { width: 48px; height: 2px; background: var(--gold); margin-bottom: 28px; }
.apres-sub {
  color: var(--text-2); font-size: 16px; line-height: 1.7; max-width: 300px; margin-bottom: 56px;
  position: relative;
}
.btn-comecar {
  background: linear-gradient(135deg, rgba(126,184,212,0.22), rgba(126,184,212,0.06));
  border: 1px solid rgba(126,184,212,0.5); border-radius: 4px;
  color: var(--text); font-family: var(--font-display); font-size: 18px;
  letter-spacing: 3px; padding: 18px 40px; cursor: pointer;
  width: 100%; max-width: 320px;
  box-shadow: 0 0 40px rgba(126,184,212,0.18), inset 0 1px 0 rgba(255,255,255,0.05);
  transition: all .3s; position: relative;
}
.btn-comecar:active { transform: scale(0.98); }

/* STEP 2 - Quiz */
.s66-quiz { display: none; flex-direction: column; min-height: 100%; padding: 52px 24px 40px; background: var(--bg); }
.s66-quiz.visible { display: flex; }

.quiz-progress { display: flex; gap: 6px; margin-bottom: 44px; }
.quiz-progress-dot { height: 3px; flex: 1; background: var(--bg3); border-radius: 2px; transition: background .4s; }
.quiz-progress-dot.done { background: var(--ice); opacity: 0.5; }
.quiz-progress-dot.active { background: var(--ice); }

.quiz-step { flex: 1; display: flex; flex-direction: column; }
.quiz-emoji { font-size: 36px; margin-bottom: 16px; }
.quiz-pergunta { font-family: var(--font-display); font-size: clamp(30px,8vw,42px); line-height: 1.05; color: var(--text); margin-bottom: 8px; letter-spacing: 1px; }
.quiz-instrucao { font-size: 12px; color: var(--text-3); font-family: var(--font-mono); letter-spacing: 1.5px; margin-bottom: 28px; text-transform: uppercase; }
.quiz-opcoes { display: flex; flex-direction: column; gap: 10px; }
.quiz-opcao {
  background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 15px 18px; cursor: pointer; color: var(--text-2); font-size: 14px;
  line-height: 1.4; transition: all .2s; text-align: left; font-family: var(--font-body);
}
.quiz-opcao.selected { background: rgba(126,184,212,0.1); border-color: rgba(126,184,212,0.5); color: var(--text); }
.quiz-textarea {
  width: 100%; background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 16px; color: var(--text);
  font-family: var(--font-body); font-size: 14px; line-height: 1.65;
  resize: none; height: 160px; outline: none; transition: border-color .25s;
}
.quiz-textarea:focus { border-color: rgba(126,184,212,0.4); }
.quiz-textarea::placeholder { color: var(--text-3); }

.quiz-nav { display: flex; gap: 10px; margin-top: auto; padding-top: 24px; }
.btn-quiz-next {
  flex: 1; background: linear-gradient(135deg, rgba(126,184,212,0.18), rgba(126,184,212,0.05));
  border: 1px solid rgba(126,184,212,0.4); border-radius: var(--radius);
  color: var(--ice); font-family: var(--font-display); font-size: 15px;
  letter-spacing: 2px; padding: 16px; cursor: pointer; transition: all .25s;
}
.btn-quiz-next:active { transform: scale(0.97); }
.btn-quiz-back {
  background: transparent; border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text-3); font-size: 13px; padding: 12px 18px; cursor: pointer;
  font-family: var(--font-body);
}

/* STEP 3 - Lembretes */
.s66-lembretes {
  display: none; flex-direction: column; min-height: 100%; padding: 56px 28px 40px;
  background: linear-gradient(180deg, #0a0a0f, #0d1520 60%, #0a0a0f);
}
.s66-lembretes.visible { display: flex; }
.lembretes-tag { font-family: var(--font-mono); font-size: 11px; letter-spacing: 3px; color: var(--gold); opacity: 0.8; text-transform: uppercase; margin-bottom: 20px; }
.s66-lembretes h2 { font-family: var(--font-display); font-size: clamp(36px,9vw,52px); line-height: 0.92; color: var(--text); letter-spacing: 3px; margin-bottom: 40px; }
.lembrete-item { display: flex; gap: 20px; align-items: flex-start; margin-bottom: 28px; padding-bottom: 28px; border-bottom: 1px solid var(--border); }
.lembrete-item:last-of-type { border-bottom: none; margin-bottom: 0; }
.lembrete-num { font-family: var(--font-display); font-size: 52px; line-height: 1; color: var(--ice); opacity: 0.2; min-width: 44px; }
.lembrete-text { color: var(--text-2); font-size: 14px; line-height: 1.75; padding-top: 10px; }
.lembrete-text strong { color: var(--text); font-weight: 600; }
.prepare-cta { font-family: var(--font-display); font-size: clamp(20px,5vw,26px); letter-spacing: 1px; color: var(--gold); margin: 36px 0 40px; line-height: 1.3; }
.lembretes-nav { display: flex; gap: 10px; }
.btn-iniciar {
  flex: 1; background: linear-gradient(135deg, rgba(126,184,212,0.22), rgba(126,184,212,0.06));
  border: 1px solid rgba(126,184,212,0.5); border-radius: var(--radius);
  color: var(--text); font-family: var(--font-display); font-size: 15px;
  letter-spacing: 2px; padding: 16px; cursor: pointer;
  box-shadow: 0 0 30px rgba(126,184,212,0.12); transition: all .3s;
}
.btn-iniciar:active { transform: scale(0.97); }
.btn-voltar-lemb {
  background: transparent; border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text-3); font-size: 13px; padding: 12px 18px; cursor: pointer;
  font-family: var(--font-body);
}

/* STEP 4 - Dashboard */
.s66-dashboard { display: none; flex-direction: column; height: 100%; }
.s66-dashboard.visible { display: flex; }

.s66-tabs {
  display: flex; background: var(--bg2); border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.s66-tab {
  flex: 1; padding: 14px 8px; font-size: 11px; letter-spacing: 1.5px;
  font-family: var(--font-mono); color: var(--text-3); cursor: pointer;
  transition: all .25s; text-align: center; border-bottom: 2px solid transparent;
  text-transform: uppercase;
}
.s66-tab.active { color: var(--ice); border-bottom-color: var(--ice); }

.s66-tab-content { flex: 1; overflow-y: auto; overscroll-behavior: contain; }

/* Escalada */
.s66-escalada { padding: 24px 16px; display: block; }
.s66-escalada.hidden { display: none; }
.escalada-header { margin-bottom: 20px; }
.escalada-header h3 { font-family: var(--font-display); font-size: 26px; letter-spacing: 2px; color: var(--text); }
.escalada-header p { color: var(--text-2); font-size: 12px; margin-top: 4px; font-family: var(--font-mono); }

.dias-legend { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 18px; }
.legend-item { display: flex; align-items: center; gap: 6px; font-size: 10px; color: var(--text-3); font-family: var(--font-mono); text-transform: uppercase; letter-spacing: 1px; }
.legend-dot { width: 8px; height: 8px; border-radius: 50%; }
.legend-dot.futuro { background: var(--bg3); border: 1px solid var(--border); }
.legend-dot.positivo { background: var(--green); }
.legend-dot.negativo { background: var(--red); }
.legend-dot.nulo { background: var(--gold); }

.dias-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; padding-bottom: 24px; }
.dia-card {
  background: var(--surface); border: 1px solid var(--border); border-radius: 10px;
  padding: 10px 8px 8px; cursor: pointer; transition: all .2s;
  position: relative; aspect-ratio: 1; display: flex; flex-direction: column;
  justify-content: space-between;
}
.dia-card.locked { opacity: 0.45; cursor: default; pointer-events: none; }
.dia-card.positivo { border-color: rgba(76,175,125,0.5); background: rgba(76,175,125,0.07); }
.dia-card.negativo { border-color: rgba(224,82,82,0.5); background: rgba(224,82,82,0.07); }
.dia-card.nulo { border-color: rgba(212,168,83,0.5); background: rgba(212,168,83,0.07); }
.dia-card:not(.locked):hover { border-color: rgba(126,184,212,0.4); transform: translateY(-1px); }
.dia-num { font-family: var(--font-display); font-size: 20px; color: var(--text); line-height: 1; }
.dia-lock { position: absolute; top: 7px; right: 7px; font-size: 11px; opacity: 0.35; }
.dia-status-dot { width: 7px; height: 7px; border-radius: 50%; }
.dia-status-dot.positivo { background: var(--green); }
.dia-status-dot.negativo { background: var(--red); }
.dia-status-dot.nulo { background: var(--gold); }
.dia-date { font-size: 9px; color: var(--text-3); font-family: var(--font-mono); }

/* Popup dia */
.dia-popup-overlay {
  display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75);
  z-index: 300; align-items: flex-end; backdrop-filter: blur(4px);
}
.dia-popup-overlay.open { display: flex; }
.dia-popup {
  background: var(--bg2); border: 1px solid var(--border); border-radius: 20px 20px 0 0;
  padding: 28px 24px 40px; width: 100%; max-height: 82vh; overflow-y: auto;
}
.dia-popup-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.dia-popup-title { font-family: var(--font-display); font-size: 36px; letter-spacing: 2px; color: var(--text); }
.dia-popup-close {
  background: var(--surface); border: 1px solid var(--border); border-radius: 50%;
  width: 34px; height: 34px; color: var(--text-2); font-size: 16px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
}
.dia-popup-content {
  color: var(--text-2); font-size: 14px; line-height: 1.75; margin-bottom: 28px;
  padding: 18px 20px; background: var(--surface); border-radius: var(--radius);
  border-left: 3px solid var(--gold);
}
.dia-pontuar-label { font-size: 11px; color: var(--text-3); font-family: var(--font-mono); letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 12px; }
.pontuacao-btns { display: flex; gap: 8px; }
.btn-pontuar {
  flex: 1; padding: 13px 4px; border-radius: var(--radius); border: 1px solid;
  font-size: 11px; letter-spacing: 1px; font-family: var(--font-mono);
  text-transform: uppercase; cursor: pointer; transition: all .2s; background: transparent;
}
.btn-pontuar.positivo { border-color: var(--green); color: var(--green); }
.btn-pontuar.positivo:hover, .btn-pontuar.positivo.ativo { background: var(--green); color: #000; }
.btn-pontuar.nulo { border-color: var(--gold); color: var(--gold); }
.btn-pontuar.nulo:hover, .btn-pontuar.nulo.ativo { background: var(--gold); color: #000; }
.btn-pontuar.negativo { border-color: var(--red); color: var(--red); }
.btn-pontuar.negativo:hover, .btn-pontuar.negativo.ativo { background: var(--red); color: #fff; }

/* Sherpas */
.s66-sherpas { padding: 24px 16px; display: none; }
.s66-sherpas.visible { display: block; }
.sherpas-header { margin-bottom: 28px; }
.sherpas-header h3 { font-family: var(--font-display); font-size: 26px; letter-spacing: 2px; color: var(--text); }
.sherpas-header p { color: var(--text-2); font-size: 12px; margin-top: 4px; font-family: var(--font-mono); }

.bloco-sherpa { margin-bottom: 20px; }
.bloco-titulo { font-family: var(--font-mono); font-size: 10px; letter-spacing: 3px; color: var(--gold); margin-bottom: 10px; text-transform: uppercase; padding: 0 4px; }
.instrucao-item { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); margin-bottom: 6px; overflow: hidden; }
.instrucao-header { display: flex; align-items: center; padding: 14px 16px; cursor: pointer; gap: 10px; }
.instr-num { font-family: var(--font-mono); font-size: 10px; color: var(--text-3); min-width: 22px; }
.instr-text { flex: 1; font-size: 13px; color: var(--text-2); font-weight: 500; }
.instr-arrow { color: var(--text-3); font-size: 11px; transition: transform .25s; flex-shrink: 0; }
.instrucao-item.open .instr-arrow { transform: rotate(180deg); }
.instrucao-item.open .instr-text { color: var(--text); }
.instrucao-body { display: none; padding: 0 16px 14px 48px; color: var(--text-3); font-size: 13px; line-height: 1.65; }
.instrucao-item.open .instrucao-body { display: block; }

/* ‚îÄ‚îÄ APRENDER ‚îÄ‚îÄ */
#screen-aprender .screen-header { padding: 24px 20px 0; }
#screen-aprender .screen-header h1 { font-family: var(--font-display); font-size: 36px; letter-spacing: 2px; color: var(--text); margin-bottom: 4px; }
#screen-aprender .screen-header p { font-size: 13px; color: var(--text-2); }
.learn-grid { display: flex; flex-direction: column; gap: 12px; padding: 20px; }
.learn-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; cursor: pointer; transition: border-color .2s; }
.learn-card:hover { border-color: rgba(126,184,212,.25); }
.learn-card-img { height: 120px; background: linear-gradient(135deg, var(--bg3), var(--bg2)); display: flex; align-items: center; justify-content: center; font-size: 48px; }
.learn-card-body { padding: 16px; }
.learn-card-tag { font-family: var(--font-mono); font-size: 10px; letter-spacing: 2px; color: var(--gold); text-transform: uppercase; margin-bottom: 6px; }
.learn-card-title { font-size: 15px; font-weight: 600; color: var(--text); margin-bottom: 6px; }
.learn-card-desc { font-size: 12px; color: var(--text-2); line-height: 1.5; }

/* ‚îÄ‚îÄ PROGRESSO ‚îÄ‚îÄ */
#screen-progresso .screen-header { padding: 24px 20px 0; }
#screen-progresso .screen-header h1 { font-family: var(--font-display); font-size: 36px; letter-spacing: 2px; color: var(--text); }
.prog-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 20px; }
.stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 18px; }
.stat-label { font-family: var(--font-mono); font-size: 10px; letter-spacing: 2px; color: var(--text-3); text-transform: uppercase; margin-bottom: 8px; }
.stat-value { font-family: var(--font-display); font-size: 40px; line-height: 1; color: var(--text); }
.stat-value.green { color: var(--green); }
.stat-value.gold { color: var(--gold); }
.stat-value.ice { color: var(--ice); }
.stat-value.red { color: var(--red); }

/* ‚îÄ‚îÄ PERFIL ‚îÄ‚îÄ */
#screen-perfil .screen-header { padding: 24px 20px 0; }
#screen-perfil .screen-header h1 { font-family: var(--font-display); font-size: 36px; letter-spacing: 2px; color: var(--text); }
.profile-avatar { width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, var(--bg3), var(--surface)); border: 2px solid var(--gold); display: flex; align-items: center; justify-content: center; font-size: 36px; margin: 20px auto 8px; }
.profile-name { text-align: center; font-family: var(--font-display); font-size: 24px; letter-spacing: 2px; color: var(--text); margin-bottom: 4px; }
.profile-level { text-align: center; font-family: var(--font-mono); font-size: 11px; letter-spacing: 2px; color: var(--gold); text-transform: uppercase; margin-bottom: 32px; }
.profile-menu { padding: 0 20px; display: flex; flex-direction: column; gap: 8px; }
.profile-item { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px 20px; display: flex; align-items: center; gap: 14px; cursor: pointer; }
.profile-item-icon { font-size: 20px; }
.profile-item-label { font-size: 14px; color: var(--text-2); flex: 1; }
.profile-item-arrow { color: var(--text-3); font-size: 12px; }

/* ‚îÄ‚îÄ UTILITIES ‚îÄ‚îÄ */
.hidden { display: none !important; }
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-login" class="screen">
  <div class="login-bg"></div>
  <div class="login-top">
    <div class="login-logo">
      <svg viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
        <polygon points="36,8 4,64 68,64" fill="none" stroke="#7eb8d4" stroke-width="2"/>
        <polygon points="36,20 18,64 54,64" fill="rgba(126,184,212,0.08)" stroke="rgba(126,184,212,0.3)" stroke-width="1"/>
        <polygon points="36,8 36,64" stroke="rgba(212,168,83,0.4)" stroke-width="1" stroke-dasharray="4,4"/>
        <circle cx="36" cy="8" r="3" fill="#d4a853"/>
      </svg>
    </div>
    <div class="login-tagline">M√©todo Everest</div>
    <div class="login-title"><em>SUBA</em><br>A MONTANHA</div>
    <div class="login-sub">66 dias para reprogramar sua mente, corpo e rotina.</div>
  </div>
  <div class="login-bottom">
    <button class="btn-login" onclick="doLogin()">INICIAR ESCALADA</button>
    <div class="login-hint">Sua jornada come√ßa aqui</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN NAV ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="nav" style="display:none">
  <div class="nav-item active" onclick="navTo('inicio',this)">
    <div class="nav-icon">üè†</div>
    <div class="nav-label">In√≠cio</div>
  </div>
  <div class="nav-item" onclick="navTo('hoje',this)">
    <div class="nav-icon">üèî</div>
    <div class="nav-label">66 Dias</div>
  </div>
  <div class="nav-item" onclick="navTo('aprender',this)">
    <div class="nav-icon">üìö</div>
    <div class="nav-label">Aprender</div>
  </div>
  <div class="nav-item" onclick="navTo('progresso',this)">
    <div class="nav-icon">üìä</div>
    <div class="nav-label">Progresso</div>
  </div>
  <div class="nav-item" onclick="navTo('perfil',this)">
    <div class="nav-icon">üë§</div>
    <div class="nav-label">Perfil</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê IN√çCIO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-inicio" class="screen">
  <div class="screen-header">
    <div class="greeting" id="greeting">Bom dia,</div>
    <div class="headline">PRONTO PARA<br><em>SUBIR?</em></div>
  </div>
  <div class="streak-card">
    <div class="streak-fire">üî•</div>
    <div class="streak-info">
      <div class="streak-label">Sequ√™ncia atual</div>
      <div class="streak-num" id="streak-num">0</div>
      <div class="streak-unit">dias seguidos</div>
    </div>
  </div>
  <div class="section-title">Acesso r√°pido</div>
  <div class="quick-grid">
    <div class="quick-card" onclick="navTo('hoje', document.querySelectorAll('.nav-item')[1])">
      <div class="quick-card-icon">üèî</div>
      <div class="quick-card-title">66 Dias</div>
      <div class="quick-card-sub">Minha escalada</div>
    </div>
    <div class="quick-card" onclick="navTo('aprender', document.querySelectorAll('.nav-item')[2])">
      <div class="quick-card-icon">üìö</div>
      <div class="quick-card-title">Aprender</div>
      <div class="quick-card-sub">Conte√∫do novo</div>
    </div>
    <div class="quick-card" onclick="navTo('progresso', document.querySelectorAll('.nav-item')[3])">
      <div class="quick-card-icon">üìä</div>
      <div class="quick-card-title">Progresso</div>
      <div class="quick-card-sub">Seus resultados</div>
    </div>
    <div class="quick-card" onclick="navTo('perfil', document.querySelectorAll('.nav-item')[4])">
      <div class="quick-card-icon">‚öôÔ∏è</div>
      <div class="quick-card-title">Perfil</div>
      <div class="quick-card-sub">Configura√ß√µes</div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 66 DIAS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-hoje" class="screen">
  <div class="s66-flow" id="s66-flow">

    <!-- STEP 0: Entrada -->
    <div id="s66-step-0" class="s66-onboard">
      <div class="s66-mountain-bg"></div>
      <div class="s66-onboard-content">
        <div class="s66-peak-icon">üèîÔ∏è</div>
        <h1>66<br><span>DIAS</span></h1>
        <p>Reprograma√ß√£o e condicionamento para performance absoluta</p>
        <button class="btn-subir" onclick="S66.goTo(1)">SUBIR A MONTANHA</button>
      </div>
    </div>

    <!-- STEP 1: Apresenta√ß√£o -->
    <div id="s66-step-1" class="s66-apresentacao">
      <div class="apres-tag">M√©todo Everest Lab</div>
      <h2>SUBA A<br><em>MONTANHA</em></h2>
      <div class="apres-divider"></div>
      <p class="apres-sub">66 dias de reprograma√ß√£o e condicionamento para performance absoluta</p>
      <button class="btn-comecar" onclick="S66.goTo(2)">COME√áAR AGORA</button>
    </div>

    <!-- STEP 2: Quiz -->
    <div id="s66-step-2" class="s66-quiz">
      <div class="quiz-progress">
        <div class="quiz-progress-dot active" id="qp1"></div>
        <div class="quiz-progress-dot" id="qp2"></div>
        <div class="quiz-progress-dot" id="qp3"></div>
        <div class="quiz-progress-dot" id="qp4"></div>
      </div>

      <!-- Q1 -->
      <div id="q1" class="quiz-step">
        <div class="quiz-emoji">üèîÔ∏è</div>
        <div class="quiz-pergunta">O que voc√™ quer levar ao topo?</div>
        <div class="quiz-instrucao">Escolha at√© 3 op√ß√µes</div>
        <div class="quiz-opcoes">
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,1)">Mais energia e disposi√ß√£o no dia a dia</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,1)">Um corpo mais forte e saud√°vel</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,1)">Clareza mental e foco</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,1)">H√°bitos consistentes que durem</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,1)">Confian√ßa na minha pr√≥pria capacidade</button>
        </div>
        <div class="quiz-nav">
          <button class="btn-quiz-next" onclick="S66.nextQ(2)">PR√ìXIMO ‚Üí</button>
        </div>
      </div>

      <!-- Q2 -->
      <div id="q2" class="quiz-step hidden">
        <div class="quiz-emoji">‚õ∞Ô∏è</div>
        <div class="quiz-pergunta">O que te faz ficar na base?</div>
        <div class="quiz-instrucao">Escolha at√© 3 op√ß√µes</div>
        <div class="quiz-opcoes">
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,2)">Falta de tempo na rotina</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,2)">Come√ßo mas n√£o consigo manter</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,2)">N√£o sei por onde come√ßar</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,2)">J√° tentei e me frustrei antes</button>
          <button class="quiz-opcao" onclick="S66.toggleOpcao(this,2)">Me cobro demais e acabo desistindo</button>
        </div>
        <div class="quiz-nav">
          <button class="btn-quiz-back" onclick="S66.nextQ(1)">‚Üê Voltar</button>
          <button class="btn-quiz-next" onclick="S66.nextQ(3)">PR√ìXIMO ‚Üí</button>
        </div>
      </div>

      <!-- Q3 -->
      <div id="q3" class="quiz-step hidden">
        <div class="quiz-emoji">‚úçÔ∏è</div>
        <div class="quiz-pergunta">Seu dia ideal no topo</div>
        <div class="quiz-instrucao">Como seria um dia ideal quando voc√™ chegasse l√°?</div>
        <textarea class="quiz-textarea" id="q3-resp" placeholder="Escreva com detalhes. Esta vis√£o vai te manter subindo nos dias dif√≠ceis."></textarea>
        <div class="quiz-nav">
          <button class="btn-quiz-back" onclick="S66.nextQ(2)">‚Üê Voltar</button>
          <button class="btn-quiz-next" onclick="S66.nextQ(4)">PR√ìXIMO ‚Üí</button>
        </div>
      </div>

      <!-- Q4 -->
      <div id="q4" class="quiz-step hidden">
        <div class="quiz-emoji">‚úçÔ∏è</div>
        <div class="quiz-pergunta">O que mudaria na sua vida?</div>
        <div class="quiz-instrucao">Se voc√™ chegasse ao topo, o que mudaria?</div>
        <textarea class="quiz-textarea" id="q4-resp" placeholder="Seja honesto. Isso √© um compromisso com voc√™ mesmo."></textarea>
        <div class="quiz-nav">
          <button class="btn-quiz-back" onclick="S66.nextQ(3)">‚Üê Voltar</button>
          <button class="btn-quiz-next" onclick="S66.goTo(3)">CONCLUIR ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- STEP 3: Lembretes -->
    <div id="s66-step-3" class="s66-lembretes">
      <div class="lembretes-tag">Metodologia Everest Lab</div>
      <h2>ANTES DE<br>COME√áAR</h2>
      <div class="lembrete-item">
        <div class="lembrete-num">1</div>
        <div class="lembrete-text"><strong>A montanha te espera</strong> ‚Äî organize sua rotina, sua mente e seu ambiente para a jornada que est√° prestes a iniciar.</div>
      </div>
      <div class="lembrete-item">
        <div class="lembrete-num">2</div>
        <div class="lembrete-text"><strong>Cada passo conta.</strong> Trate cada dia como um compromisso com a melhor vers√£o de voc√™. Disciplina n√£o √© puni√ß√£o ‚Äî √© respeito pr√≥prio.</div>
      </div>
      <div class="lembrete-item">
        <div class="lembrete-num">3</div>
        <div class="lembrete-text"><strong>Quem chega ao topo</strong> n√£o √© quem nunca cai. √â quem continua subindo mesmo quando o caminho fica dif√≠cil.</div>
      </div>
      <div class="prepare-cta">Prepare-se.<br>Sua ascens√£o come√ßa agora.</div>
      <div class="lembretes-nav">
        <button class="btn-voltar-lemb" onclick="S66.goTo(2)">‚Üê Voltar</button>
        <button class="btn-iniciar" onclick="S66.startChallenge()">INICIAR MINHA SUBIDA ‚Üí</button>
      </div>
    </div>

    <!-- STEP 4: Dashboard -->
    <div id="s66-step-4" class="s66-dashboard">
      <div class="s66-tabs">
        <div class="s66-tab active" id="tab-btn-escalada" onclick="S66.switchTab('escalada')">üèî Minha Escalada</div>
        <div class="s66-tab" id="tab-btn-sherpas" onclick="S66.switchTab('sherpas')">üìú Sherpas</div>
      </div>
      <div class="s66-tab-content">
        <!-- Escalada -->
        <div id="tab-escalada" class="s66-escalada">
          <div class="escalada-header">
            <h3>ESCALADA</h3>
            <p id="escalada-info">Sua jornada de 66 dias</p>
          </div>
          <div class="dias-legend">
            <div class="legend-item"><div class="legend-dot futuro"></div>Futuro</div>
            <div class="legend-item"><div class="legend-dot positivo"></div>Positivo</div>
            <div class="legend-item"><div class="legend-dot nulo"></div>Nulo</div>
            <div class="legend-item"><div class="legend-dot negativo"></div>Negativo</div>
          </div>
          <div class="dias-grid" id="dias-grid"></div>
        </div>
        <!-- Sherpas -->
        <div id="tab-sherpas" class="s66-sherpas">
          <div class="sherpas-header">
            <h3>SHERPAS</h3>
            <p>33 instru√ß√µes para sua jornada</p>
          </div>
          <div id="sherpas-content"></div>
        </div>
      </div>
    </div>

  </div><!-- /s66-flow -->

  <!-- Popup dia -->
  <div class="dia-popup-overlay" id="dia-popup-overlay" onclick="S66.closePopupOverlay(event)">
    <div class="dia-popup">
      <div class="dia-popup-header">
        <div class="dia-popup-title" id="popup-title">DIA 1</div>
        <button class="dia-popup-close" onclick="S66.closeDia()">‚úï</button>
      </div>
      <div class="dia-popup-content" id="popup-content">Conte√∫do do dia em breve.</div>
      <div class="dia-pontuar-label">Como foi seu dia?</div>
      <div class="pontuacao-btns">
        <button class="btn-pontuar positivo" onclick="S66.pontuarDia('positivo')">‚úì Positivo</button>
        <button class="btn-pontuar nulo" onclick="S66.pontuarDia('nulo')">‚óé Nulo</button>
        <button class="btn-pontuar negativo" onclick="S66.pontuarDia('negativo')">‚úó Negativo</button>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê APRENDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-aprender" class="screen">
  <div class="screen-header">
    <h1>APRENDER</h1>
    <p>Conte√∫do para sua escalada</p>
  </div>
  <div class="learn-grid">
    <div class="learn-card">
      <div class="learn-card-img">üß†</div>
      <div class="learn-card-body">
        <div class="learn-card-tag">Mentalidade</div>
        <div class="learn-card-title">A Psicologia do H√°bito</div>
        <div class="learn-card-desc">Por que 66 dias e n√£o 21. A ci√™ncia por tr√°s da reprograma√ß√£o.</div>
      </div>
    </div>
    <div class="learn-card">
      <div class="learn-card-img">üí™</div>
      <div class="learn-card-body">
        <div class="learn-card-tag">Performance</div>
        <div class="learn-card-title">Rotina do Alpinista</div>
        <div class="learn-card-desc">Como estruturar sua manh√£ para m√°xima performance.</div>
      </div>
    </div>
    <div class="learn-card">
      <div class="learn-card-img">üåä</div>
      <div class="learn-card-body">
        <div class="learn-card-tag">Biohacking</div>
        <div class="learn-card-title">O Poder do Frio</div>
        <div class="learn-card-desc">Exposi√ß√£o ao frio e seus efeitos na disciplina e sa√∫de.</div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PROGRESSO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-progresso" class="screen">
  <div class="screen-header">
    <h1>PROGRESSO</h1>
  </div>
  <div class="prog-stats">
    <div class="stat-card">
      <div class="stat-label">Dias positivos</div>
      <div class="stat-value green" id="stat-positivos">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Dias nulos</div>
      <div class="stat-value gold" id="stat-nulos">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Dias negativos</div>
      <div class="stat-value red" id="stat-negativos">0</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Dias totais</div>
      <div class="stat-value ice" id="stat-total">0</div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PERFIL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="screen-perfil" class="screen">
  <div class="screen-header">
    <h1>PERFIL</h1>
  </div>
  <div class="profile-avatar">üßó</div>
  <div class="profile-name" id="profile-name">ALPINISTA</div>
  <div class="profile-level">Em ascens√£o</div>
  <div class="profile-menu">
    <div class="profile-item">
      <div class="profile-item-icon">üîî</div>
      <div class="profile-item-label">Notifica√ß√µes</div>
      <div class="profile-item-arrow">‚Ä∫</div>
    </div>
    <div class="profile-item">
      <div class="profile-item-icon">üéØ</div>
      <div class="profile-item-label">Meus objetivos</div>
      <div class="profile-item-arrow">‚Ä∫</div>
    </div>
    <div class="profile-item" onclick="S66.resetChallenge()">
      <div class="profile-item-icon">üîÑ</div>
      <div class="profile-item-label">Reiniciar desafio</div>
      <div class="profile-item-arrow">‚Ä∫</div>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  NAVIGATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function doLogin() {
  document.getElementById('screen-login').classList.remove('active');
  document.getElementById('nav').style.display = 'flex';
  document.getElementById('screen-inicio').classList.add('active');
  updateGreeting();
  updateStreak();
}

function navTo(screen, navEl) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('screen-' + screen).classList.add('active');
  if (navEl) navEl.classList.add('active');
  if (screen === 'hoje') { S66.init(); }
  if (screen === 'progresso') { updateStats(); }
}

function updateGreeting() {
  const h = new Date().getHours();
  const g = h < 12 ? 'Bom dia' : h < 18 ? 'Boa tarde' : 'Boa noite';
  const el = document.getElementById('greeting');
  if (el) el.textContent = g + ',';
}

function updateStreak() {
  const state = S66.getState();
  if (!state || !state.started) return;
  const dias = state.dias || {};
  let streak = 0;
  const start = new Date(state.startDate);
  start.setHours(0,0,0,0);
  const today = new Date(); today.setHours(0,0,0,0);
  for (let i = Math.floor((today - start) / 86400000); i >= 0; i--) {
    const d = new Date(start); d.setDate(d.getDate() + i);
    if (dias[d.toDateString()] === 'positivo') streak++;
    else if (dias[d.toDateString()]) break;
    else break;
  }
  const el = document.getElementById('streak-num');
  if (el) el.textContent = streak;
}

function updateStats() {
  const state = S66.getState();
  if (!state || !state.started) return;
  const dias = Object.values(state.dias || {});
  document.getElementById('stat-positivos').textContent = dias.filter(d => d === 'positivo').length;
  document.getElementById('stat-nulos').textContent = dias.filter(d => d === 'nulo').length;
  document.getElementById('stat-negativos').textContent = dias.filter(d => d === 'negativo').length;
  document.getElementById('stat-total').textContent = dias.length;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  S66 - 66 DIAS MODULE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const S66 = {
  currentDia: null,
  quizData: { 1: [], 2: [], 3: '', 4: '' },

  SHERPAS: [
    { bloco: 'BLOCO 1 ‚Äî ACENDA O FOGO', itens: [
      {t:'ENCONTRE SEU PORQU√ä VERDADEIRO', c:'Descubra a raz√£o mais profunda que vai te manter subindo quando tudo parecer dif√≠cil.'},
      {t:'SOLTE O QUE J√Å N√ÉO TE SERVE', c:'Identifique cren√ßas, h√°bitos e pessoas que drenam sua energia e prepare-se para deix√°-los para tr√°s.'},
      {t:'VISUALIZE ONDE VOC√ä QUER CHEGAR', c:'Crie uma imagem mental clara e v√≠vida do seu topo. Quanto mais detalhada, mais real ela se torna.'},
      {t:'MARQUE SEU PONTO DE PARTIDA', c:'Registre onde voc√™ est√° hoje: corpo, mente, rotina. Este √© o ponto zero da sua escalada.'},
      {t:'DESPERTE PARA QUEM VOC√ä √â', c:'V√° al√©m das m√°scaras e pap√©is. Quem voc√™ √© de verdade, sem as expectativas externas?'},
      {t:'ESCREVA UMA CARTA PARA SEU EU DO FUTURO', c:'Descreva quem voc√™ ser√° no dia 66. Esta carta √© um contrato com a melhor vers√£o de voc√™.'},
      {t:'OLHE PARA SUA VIDA SEM FILTROS', c:'Uma auditoria honesta de todas as √°reas: sa√∫de, relacionamentos, finan√ßas, prop√≥sito.'}
    ]},
    { bloco: 'BLOCO 2 ‚Äî CONHE√áA SEU CORPO', itens: [
      {t:'EXPERIMENTE O PODER DO FRIO', c:'Um banho frio de 2 minutos. Simples. Brutal. Transformador. O frio ensina disciplina sem negocia√ß√£o.'},
      {t:'REGISTRE COMO VOC√ä EST√Å HOJE', c:'Peso, energia, qualidade do sono, humor. Dados s√£o o mapa da sua escalada.'},
      {t:'DESCUBRA COMO √â UM DIA SEM A√á√öCAR', c:'24 horas. Sem a√ß√∫car refinado. Observe o que acontece com sua energia e clareza mental.'},
      {t:'MOVA-SE COM PRAZER POR 30 MINUTOS', c:'N√£o √© sobre queimar calorias. √â sobre sentir seu corpo em movimento e criar o h√°bito do movimento.'},
      {t:'PRESENTEIE-SE COM 3 NOITES DE SONO PLENO', c:'Durma 7-8 horas por 3 noites seguidas. Observe a diferen√ßa na sua performance e humor.'},
      {t:'EXPERIMENTE O JEJUM COM CURIOSIDADE', c:'16 horas sem comer. Com √°gua, caf√© preto ou ch√°. Descubra o que √© fome real versus h√°bito.'},
      {t:'HIDRATE-SE COM INTEN√á√ÉO POR 3 DIAS', c:'2,5 a 3 litros de √°gua por dia. Com consci√™ncia. Cada gole √© um ato de respeito ao seu corpo.'}
    ]},
    { bloco: 'BLOCO 3 ‚Äî LIMPE O CAMINHO', itens: [
      {t:'PROTEJA SUA ENERGIA COM CARINHO', c:'Identifique o que e quem drena sua energia. Estabele√ßa limites com gentileza mas com firmeza.'},
      {t:'CUIDE DO QUE ENTRA NA SUA COZINHA', c:'Fa√ßa uma limpeza nos arm√°rios. Retire o que sabota. Deixe o que nutre.'},
      {t:'RESPIRE ‚Äî DESCONECTE-SE POR 48 HORAS', c:'Fim de semana sem redes sociais. Duas dias de presen√ßa total com voc√™ mesmo e quem voc√™ ama.'},
      {t:'ESCOLHA COM CUIDADO O QUE ALIMENTA SUA MENTE', c:'Audite o que voc√™ consome: v√≠deos, podcasts, not√≠cias. Cada conte√∫do √© comida para sua mente.'},
      {t:'RENOVE SEU AMBIENTE', c:'Reorganize um c√¥modo. Descarte o que n√£o serve. Ambiente limpo = mente limpa.'},
      {t:'PREPARE SEU ESPA√áO PARA FLORESCER', c:'Crie um espa√ßo f√≠sico dedicado √† sua evolu√ß√£o: leitura, exerc√≠cio, reflex√£o. Onde o alpinista mora.'}
    ]},
    { bloco: 'BLOCO 4 ‚Äî CULTIVE A MENTE', itens: [
      {t:'DIGA SIM PARA O DESCONFORTO UMA VEZ', c:'Fa√ßa uma coisa que voc√™ evita por medo. S√≥ uma. O desconforto √© onde o crescimento acontece.'},
      {t:'REPITA SUAS AFIRMA√á√ïES POR 7 DIAS', c:'Escreva 3 afirma√ß√µes que descrevem quem voc√™ est√° se tornando. Repita em voz alta toda manh√£.'},
      {t:'MERGULHE EM 5 HORAS DE PRESEN√áA TOTAL', c:'Cinco horas de foco absoluto numa semana. Sem multitarefa. Sem distra√ß√µes. Presen√ßa √© poder.'},
      {t:'NUTRA SUA MENTE COM ALGO NOVO', c:'Leia 50 p√°ginas de um livro que expande sua vis√£o de mundo. Conhecimento √© equipamento de escalada.'},
      {t:'EXPRESSE GRATID√ÉO EM VOZ ALTA', c:'Tr√™s coisas pelas quais voc√™ √© grato, ditas em voz alta, por 5 dias. O c√©rebro muda com gratid√£o.'},
      {t:'VIVA UM DIA INTEIRO NA GRATID√ÉO', c:'Do acordar ao dormir, veja cada momento como um presente. Um dia assim pode mudar uma vida.'}
    ]},
    { bloco: 'BLOCO 5 ‚Äî CULTIVE CONEX√ïES', itens: [
      {t:'PRATIQUE UM GESTO DE GENEROSIDADE', c:'Algo pelo outro sem esperar nada. Pode ser tempo, presen√ßa, ajuda. Generosidade expande o cora√ß√£o.'},
      {t:'PERDOE ‚Äî COME√áANDO PELO SEU PR√ìPRIO CORPO', c:'Voc√™ tem carregado julgamentos sobre si mesmo. √â hora de soltar. N√£o por fraqueza, por for√ßa.'},
      {t:'CONVIDE ALGU√âM PARA ESSA JORNADA', c:'Compartilhe o desafio com algu√©m. Escaladas s√£o mais poderosas quando compartilhadas.'},
      {t:'RECONECTE-SE COM ALGU√âM ESPECIAL', c:'Ligue ou encontre algu√©m que faz bem para sua alma. Conex√µes reais s√£o combust√≠vel para a escalada.'}
    ]},
    { bloco: 'BLOCO 6 ‚Äî PREPARE A ESCALADA', itens: [
      {t:'INVISTA EM UM CONHECIMENTO QUE VOC√ä VAI USAR', c:'Um curso, livro ou mentor na √°rea que importa para o seu topo. Investimento na subida √© obrigat√≥rio.'},
      {t:'DECLARE COM CALMA: ESTOU PRONTO PARA SUBIR', c:'Olhe para si mesmo no espelho. Diga em voz alta. Sinta o peso e a for√ßa dessa declara√ß√£o.'},
      {t:'ORGANIZE SUA SEMANA COM LEVEZA E PROP√ìSITO', c:'Planeje a pr√≥xima semana com os seus valores como b√∫ssola. Cada compromisso alinhado com o topo.'}
    ]}
  ],

  getState() {
    try { return JSON.parse(localStorage.getItem('s66') || 'null'); } catch(e) { return null; }
  },

  setState(d) { localStorage.setItem('s66', JSON.stringify(d)); },

  init() {
    const state = this.getState();
    if (state && state.started) {
      this.showStep(4);
      this.buildDashboard(state);
    } else {
      this.showStep(0);
    }
  },

  showStep(n) {
    for (let i = 0; i <= 4; i++) {
      const el = document.getElementById('s66-step-' + i);
      if (!el) continue;
      el.style.display = 'none';
      el.classList.remove('visible');
    }
    const target = document.getElementById('s66-step-' + n);
    if (!target) return;
    target.style.display = 'flex';
    target.classList.add('visible');
    // Scroll to top
    const flow = document.getElementById('s66-flow');
    if (flow) flow.scrollTop = 0;
  },

  goTo(n) {
    if (n === 2) this.resetQuizUI();
    this.showStep(n);
  },

  resetQuizUI() {
    document.querySelectorAll('.quiz-step').forEach((s, i) => {
      s.classList.toggle('hidden', i !== 0);
    });
    [1,2,3,4].forEach(i => {
      const d = document.getElementById('qp'+i);
      if (d) d.className = 'quiz-progress-dot' + (i===1?' active':'');
    });
  },

  nextQ(n) {
    document.querySelectorAll('.quiz-step').forEach(s => s.classList.add('hidden'));
    const target = document.getElementById('q'+n);
    if (target) target.classList.remove('hidden');
    [1,2,3,4].forEach(i => {
      const d = document.getElementById('qp'+i);
      if (!d) return;
      if (i < n) d.className = 'quiz-progress-dot done';
      else if (i === n) d.className = 'quiz-progress-dot active';
      else d.className = 'quiz-progress-dot';
    });
    const flow = document.getElementById('s66-flow');
    if (flow) flow.scrollTop = 0;
  },

  toggleOpcao(btn, q) {
    const arr = this.quizData[q];
    if (btn.classList.contains('selected')) {
      btn.classList.remove('selected');
      this.quizData[q] = arr.filter(x => x !== btn.textContent);
    } else {
      if (arr.length >= 3) return;
      btn.classList.add('selected');
      arr.push(btn.textContent);
    }
  },

  startChallenge() {
    const state = {
      started: true,
      startDate: new Date().toISOString(),
      dias: {},
      quiz: {
        q1: this.quizData[1],
        q2: this.quizData[2],
        q3: document.getElementById('q3-resp')?.value || '',
        q4: document.getElementById('q4-resp')?.value || ''
      }
    };
    this.setState(state);
    this.showStep(4);
    this.buildDashboard(state);
  },

  buildDashboard(state) {
    const start = new Date(state.startDate);
    start.setHours(0,0,0,0);
    const today = new Date(); today.setHours(0,0,0,0);
    const elapsed = Math.floor((today - start) / 86400000);

    const info = document.getElementById('escalada-info');
    if (info) {
      const diaAtual = Math.min(elapsed + 1, 66);
      info.textContent = `Dia ${diaAtual} de 66 ¬∑ In√≠cio: ${start.toLocaleDateString('pt-BR')}`;
    }

    const grid = document.getElementById('dias-grid');
    if (!grid) return;
    grid.innerHTML = '';

    for (let i = 1; i <= 66; i++) {
      const diaDate = new Date(start);
      diaDate.setDate(start.getDate() + i - 1);
      const unlocked = i <= elapsed + 1;
      const key = diaDate.toDateString();
      const status = (state.dias && state.dias[key]) || null;

      const card = document.createElement('div');
      card.className = 'dia-card' + (!unlocked ? ' locked' : '') + (status ? ' ' + status : '');

      let inner = `<div class="dia-num">${i}</div>`;
      if (!unlocked) inner += `<div class="dia-lock">üîí</div>`;
      if (status) inner += `<div class="dia-status-dot ${status}"></div>`;
      inner += `<div class="dia-date">${diaDate.toLocaleDateString('pt-BR',{day:'2-digit',month:'2-digit'})}</div>`;
      card.innerHTML = inner;

      if (unlocked) {
        const d = diaDate, s = status;
        card.addEventListener('click', () => this.openDia(i, d, s));
      }
      grid.appendChild(card);
    }
  },

  buildSherpas() {
    const container = document.getElementById('sherpas-content');
    if (!container || container.childElementCount > 0) return;
    let global = 0;
    this.SHERPAS.forEach(bloco => {
      const blocoDiv = document.createElement('div');
      blocoDiv.className = 'bloco-sherpa';
      blocoDiv.innerHTML = `<div class="bloco-titulo">${bloco.bloco}</div>`;
      bloco.itens.forEach(item => {
        global++;
        const el = document.createElement('div');
        el.className = 'instrucao-item';
        el.innerHTML = `
          <div class="instrucao-header" onclick="this.parentElement.classList.toggle('open')">
            <span class="instr-num">${global}.</span>
            <span class="instr-text">${item.t}</span>
            <span class="instr-arrow">‚ñæ</span>
          </div>
          <div class="instrucao-body">${item.c}</div>
        `;
        blocoDiv.appendChild(el);
      });
      container.appendChild(blocoDiv);
    });
  },

  switchTab(tab) {
    const esc = document.getElementById('tab-escalada');
    const sher = document.getElementById('tab-sherpas');
    const btnEsc = document.getElementById('tab-btn-escalada');
    const btnSher = document.getElementById('tab-btn-sherpas');

    if (tab === 'escalada') {
      esc.classList.remove('hidden'); esc.style.display = 'block';
      sher.classList.remove('visible'); sher.style.display = 'none';
      btnEsc.classList.add('active'); btnSher.classList.remove('active');
    } else {
      esc.style.display = 'none';
      sher.style.display = 'block'; sher.classList.add('visible');
      btnSher.classList.add('active'); btnEsc.classList.remove('active');
      this.buildSherpas();
    }
  },

  openDia(num, date, currentStatus) {
    this.currentDia = { num, date, key: date.toDateString() };
    document.getElementById('popup-title').textContent = 'DIA ' + num;
    document.getElementById('popup-content').textContent =
      `Guia do Dia ${num} ‚Äî O conte√∫do exclusivo deste dia estar√° dispon√≠vel em breve. Cada dia da sua escalada ter√° um desafio, uma reflex√£o e uma a√ß√£o espec√≠fica para te manter subindo em dire√ß√£o ao topo.`;

    document.querySelectorAll('.btn-pontuar').forEach(b => b.classList.remove('ativo'));
    if (currentStatus) {
      const btn = document.querySelector(`.btn-pontuar.${currentStatus}`);
      if (btn) btn.classList.add('ativo');
    }
    document.getElementById('dia-popup-overlay').classList.add('open');
  },

  closePopupOverlay(e) {
    if (e.target === document.getElementById('dia-popup-overlay')) this.closeDia();
  },

  closeDia() {
    document.getElementById('dia-popup-overlay').classList.remove('open');
    this.currentDia = null;
  },

  pontuarDia(status) {
    if (!this.currentDia) return;
    const state = this.getState();
    if (!state.dias) state.dias = {};
    state.dias[this.currentDia.key] = status;
    this.setState(state);

    document.querySelectorAll('.btn-pontuar').forEach(b => b.classList.remove('ativo'));
    const btn = document.querySelector(`.btn-pontuar.${status}`);
    if (btn) btn.classList.add('ativo');

    setTimeout(() => {
      this.buildDashboard(state);
      this.closeDia();
      updateStreak();
    }, 500);
  },

  resetChallenge() {
    if (confirm('Tem certeza que deseja reiniciar o desafio? Todo seu progresso ser√° perdido.')) {
      localStorage.removeItem('s66');
      this.showStep(0);
    }
  }
};

// ‚ïê‚ïê INIT ‚ïê‚ïê
window.addEventListener('DOMContentLoaded', () => {
  const hasSession = localStorage.getItem('s66session');
  if (hasSession) {
    doLogin();
  } else {
    document.getElementById('screen-login').classList.add('active');
  }

  // Store session on login
  const origLogin = window.doLogin;
  window.doLogin = function() {
    localStorage.setItem('s66session', '1');
    origLogin();
  };
});
</script>
</body>
</html>
